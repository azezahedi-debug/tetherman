  -----------------------------------------------------------------------------
  bot.py
  -----------------------------------------------------------------------------
  import os import requests from telegram import InlineKeyboardButton,
  InlineKeyboardMarkup from telegram.ext import Updater, CommandHandler,
  CallbackQueryHandler, MessageHandler, Filters

  TOKEN = os.getenv(â€œTOKENâ€) ADMIN_ID = os.getenv(â€œADMIN_IDâ€)

  NETWORKS = [â€œTRC20â€, â€œERC20â€, â€œBEP20â€]

  def get_usdt_price(): try: r =
  requests.get(â€œhttps://api.binance.com/api/v3/ticker/price?symbol=USDTUSDTâ€)
  return â€œ1.00â€ except: return â€œ1.00â€

  def start(update, context): keyboard = [ [InlineKeyboardButton(â€œğŸ’° Ø®Ø±ÛŒØ¯ ØªØªØ±â€,
  callback_data=â€œbuyâ€)], [InlineKeyboardButton(â€œğŸ’¸ ÙØ±ÙˆØ´ ØªØªØ±â€,
  callback_data=â€œsellâ€)], [InlineKeyboardButton(â€œğŸ’² Ù‚ÛŒÙ…Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ ØªØªØ±â€,
  callback_data=â€œpriceâ€)], [InlineKeyboardButton(â€œğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒâ€,
  url=â€œhttps://t.me/YourSupportIDâ€)]] reply_markup =
  InlineKeyboardMarkup(keyboard) update.message.reply_text(â€œØ³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª
  Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ØªØªØ±Ù…ÙÙ† Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ.Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:â€, reply_markup=reply_markup)

  def menu(update): keyboard = [ [InlineKeyboardButton(â€œğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆâ€,
  callback_data=â€œmenuâ€)]] return InlineKeyboardMarkup(keyboard)

  def handle_buttons(update, context): query = update.callback_query
  query.answer()

  if query.data == â€œmenuâ€: query.edit_message_text(â€œØ¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø±Ú¯Ø´ØªÛŒ!â€,
  reply_markup=None) return start(query, context)

  if query.data in [â€œbuyâ€, â€œsellâ€]: context.user_data[â€œactionâ€] = query.data
  context.user_data[â€œstepâ€] = â€œamountâ€ query.edit_message_text(â€œâœ” Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø±
  ØªØªØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:â€, reply_markup=menu(query)) return

  if query.data == â€œpriceâ€: price = get_usdt_price()
  query.edit_message_text(fâ€ğŸ’² Ù‚ÛŒÙ…Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ ØªØªØ±: {price} Ø¯Ù„Ø§Ø±â€,
  reply_markup=menu(query)) return

  def handle_messages(update, context): step = context.user_data.get(â€œstepâ€)
  action = context.user_data.get(â€œactionâ€)

  if step == â€œamountâ€: context.user_data[â€œamountâ€] = update.message.text
  context.user_data[â€œstepâ€] = â€œnetworkâ€ keyboard = [[InlineKeyboardButton(net,
  callback_data=fâ€net_{net}â€œ)] for net in NETWORKS]
  update.message.reply_text(â€œâœ” Ù„Ø·ÙØ§Ù‹ Ø´Ø¨Ú©Ù‡ Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:â€,
  reply_markup=InlineKeyboardMarkup(keyboard)) return

  if update.callback_query: query = update.callback_query if
  query.data.startswith(â€œnet_â€): network = query.data.replace(â€œnet_â€, â€œâ€œ)
  context.user_data[â€networkâ€] = network context.user_data[â€stepâ€] =â€walletâ€
  query.edit_message_text(â€œâœ” Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙâ€ŒÙ¾ÙˆÙ„ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:â€,
  reply_markup=menu(query)) return

  if step == â€œwalletâ€: context.user_data[â€œwalletâ€] = update.message.text amount
  = context.user_data[â€œamountâ€] action_txt = â€œØ®Ø±ÛŒØ¯â€ if
  context.user_data[â€œactionâ€] == â€œbuyâ€ else â€œÙØ±ÙˆØ´â€ network =
  context.user_data[â€œnetworkâ€] wallet = context.user_data[â€œwalletâ€] user =
  update.message.from_user

  with open(â€œorders.txtâ€, â€œaâ€) as f: f.write(fâ€{user.id} | {action_txt} |
  {amount} | {network} | {wallet}â€œ)

  context.bot.send_message( chat_id=ADMIN_ID, text=fâ€ğŸ“Œ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯â€ fâ€ğŸ‘¤ Ú©Ø§Ø±Ø¨Ø±:
  @user.usernameâ€ fâ€ğŸ†” Ø¢ÛŒØ¯ÛŒ: {user.id}â€ fâ€ğŸ”¸ Ù†ÙˆØ¹ Ù…Ø¹Ø§Ù…Ù„Ù‡: {action_txt}â€ fâ€ğŸ”¹
  Ù…Ù‚Ø¯Ø§Ø±: {amount}â€ fâ€ğŸ”¸ Ø´Ø¨Ú©Ù‡: {network}â€ fâ€ğŸ”¹ Ú©ÛŒÙ Ù¾ÙˆÙ„: {wallet}â€ )

  update.message.reply_text(â€œâœ” Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³
  Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.â€) context.user_data.clear() return

  def main(): updater = Updater(TOKEN, use_context=True) dp =
  updater.dispatcher dp.add_handler(CommandHandler(â€œstartâ€, start))
  dp.add_handler(CallbackQueryHandler(handle_buttons))
  dp.add_handler(MessageHandler(Filters.text, handle_messages))
  updater.start_polling() updater.idle()

  if name == â€œmainâ€: main()
  -----------------------------------------------------------------------------

requirements.txt

python-telegram-bot==13.15 requests

  -----------
  README.md
  -----------

TetherMan Telegram Bot

A professional USDT buy/sell bot for Telegram using python-telegram-bot.
